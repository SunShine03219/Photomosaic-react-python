(this["webpackJsonpphotomosaic-art"]=this["webpackJsonpphotomosaic-art"]||[]).push([[0],{11:function(e,t,a){e.exports=a.p+"static/media/spinner.dde328da.gif"},13:function(e,t,a){e.exports=a.p+"static/media/demo.c4e8835e.gif"},15:function(e,t,a){e.exports=a(27)},20:function(e,t,a){},27:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(9),c=a.n(i);a(20);var s=function(){return r.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark "},r.a.createElement("strong",{className:"navbar-brand"},"PHOTOMOSAIC"))},l=a(2),o=a(3),m=a.n(o),u=a(4),p=a(5);var d=function(e){var t=e.error;return""!==t?r.a.createElement("div",{className:"alert alert-danger mt-3 mb-3"},r.a.createElement("strong",null,t)):null},f=a(8);a(22);var b=function(e){var t=e.imageUrls,a=e.setFiles,n=e.files;return r.a.createElement("div",{className:"form-group multi-preview mt-5"},r.a.createElement("div",{className:"ccontainer"},t.map((function(e,t){return r.a.createElement("div",{key:t,className:"ccc"},r.a.createElement(f.LazyLoadImage,{effect:"blur",src:e,width:"150px",height:"150px"}),r.a.createElement("a",{href:"/#",onClick:function(){return function(e){return a(n.filter((function(t,a){return a!==e})))}(t)}},r.a.createElement("i",{className:"fas fa-window-close"})))}))))},h=a(11),g=a.n(h);function v(){return r.a.createElement("div",null,r.a.createElement("img",{src:g.a,alt:"Loading...",style:{width:"200px",margin:"auto",display:"block"}}))}var E=["png","jpeg","jpg"];var w=function(e){var t=e.incrementStep,a=e.setDirname,i=Object(n.useState)(""),c=Object(l.a)(i,2),s=c[0],o=c[1],f=Object(n.useState)(""),h=Object(l.a)(f,2),g=h[0],E=h[1],w=Object(n.useState)(!1),y=Object(l.a)(w,2),O=y[0],j=y[1],S=Object(n.useState)([]),N=Object(l.a)(S,2),x=N[0],k=N[1],F=Object(n.useState)(0),T=Object(l.a)(F,2),C=T[0],M=T[1],D=function(){var e="",t=!0;return x.length<30&&(e="Please make sure the number of files uploaded is between ".concat(30," and ").concat(50),t=!1),!!t||(E(e),setTimeout((function(){return E("")}),3e3),!1)},P=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""!==s){e.next=4;break}return E("Search cannot empty"),setTimeout((function(){return E("")}),3e3),e.abrupt("return");case 4:return(t=new FormData).append("searchText",s),t.append("count",C),j(!0),e.next=10,fetch("/api/search",{method:"POST",body:t});case 10:return a=e.sent,e.next=13,a.json();case 13:n=e.sent,r=[].concat(Object(u.a)(n.search_results),Object(u.a)(x)),k(r),n.search_results>0&&M((function(e){return e+1})),j(!1);case 18:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(p.a)(m.a.mark((function e(){var n,r,i,c,s;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(D()){e.next=2;break}return e.abrupt("return");case 2:return j(!0),(n=new FormData).append("image_urls",x.join(" ")),e.next=7,fetch("/api/grab",{method:"POST",body:n});case 7:return r=e.sent,e.next=10,r.json();case 10:i=e.sent,j(!1),c=i.abort,s=i.dirname,c?(E("Error in server :( Please Try again"),setTimeout((function(){return E("")}),3e3)):(k([]),o(""),M(0),E(""),a(s),sessionStorage.setItem("dirname",s),t());case 14:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return O?r.a.createElement(v,null):r.a.createElement("div",{className:"tab-pane fade active show",id:"grabFromInternet"},r.a.createElement("h6",null,"Grab the smaller image set from the internet. Make sure you select atleast 30 images. The top 50 images will be used for making the mosaic. Try to pic images with different color distributions for more better results. NOTE: The quality of the generated mosaic will largely depend on smaller image set and the target image. You might have to try a few times before you can get it right :)"),r.a.createElement("div",{className:"form-group mt-5"},r.a.createElement("div",{className:"input-group mb-5"},r.a.createElement("input",{className:"form-control form-control-lg",type:"text",placeholder:"Search the internet Eg: Jemma Simmons",id:"inputLarge",value:s,onChange:function(e){return o(e.target.value)},readOnly:x.length>0}),0===x.length&&r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{onClick:P,className:"input-group-text btn-primary"},"Search"))),x.length>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("button",{type:"button",onClick:I,className:"btn btn-primary btn-lg btn-block"},"Grab"),r.a.createElement("button",{type:"button",onClick:P,className:"btn btn-primary btn-lg btn-block mb-5"},"Load More"),r.a.createElement("h4",{className:"mt-2"},"Number of images selected : ",Math.min(50,x.length))),r.a.createElement(d,{className:"mb-2 mt-1",error:g}),r.a.createElement(b,{imageUrls:x,setFiles:k,files:x})))},y=a(29);var O=function(e){var t=e.filesUploaded,a=e.totalFiles;return r.a.createElement(r.a.Fragment,null,r.a.createElement("h3",{className:"text-center"},"Files uploaded ",t,"/",a),r.a.createElement("div",{className:"progress"},r.a.createElement("progress",{style:{width:"100%"},max:"100",value:Math.round(t/a*100)||0})))};var j=function(e){var t=e.incrementStep,a=e.setDirname,i=Object(n.useState)([]),c=Object(l.a)(i,2),s=c[0],o=c[1],f=Object(n.useState)(!1),h=Object(l.a)(f,2),g=h[0],v=h[1],w=Object(n.useState)(0),j=Object(l.a)(w,2),S=j[0],N=j[1],x=Object(n.useState)(""),k=Object(l.a)(x,2),F=k[0],T=k[1],C=function(){var e,t=0,a=!0;return s.forEach((function(e){return t+=e.size/1024/1024})),t>30?(e="Total file size has exceeded, Max upload limit is ".concat(30,"MB"),a=!1):(s.length<30||s.length>50)&&(e="Please make sure the number of files uploaded is between ".concat(30," and ").concat(50),a=!1),!!a||(T(e),setTimeout((function(){return T("")}),3e3),!1)},M=function(){var e=Object(p.a)(m.a.mark((function e(n){var r,i,c,l,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),C()){e.next=3;break}return e.abrupt("return");case 3:r=Object(y.a)(),v(!0),i=0;case 6:if(!(i<s.length)){e.next=32;break}return(c=new FormData).append("file",s[i]),c.append("extension",s[i].type.split("/")[1]),c.append("filename",Object(y.a)()),c.append("dirname",r),e.next=14,fetch("api/upload",{method:"POST",body:c});case 14:return l=e.sent,e.next=17,l.json();case 17:if(!e.sent.abort){e.next=28;break}return(u=new FormData).append("dirname",r),e.next=23,fetch("api/delete",{method:"POST",body:u});case 23:return T("Error in server :( Please Try again"),setTimeout((function(){return T("")}),3e3),o([]),N(0),e.abrupt("break",32);case 28:N((function(e){return e+1}));case 29:i++,e.next=6;break;case 32:s.length>0&&(a(r),t(),v(!1),sessionStorage.setItem("dirname",r),o([]),N(0),T("")),v(!1);case 34:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();if(g)return r.a.createElement(O,{totalFiles:s.length,filesUploaded:S});var D=s.map((function(e){return URL.createObjectURL(e)}));return r.a.createElement("div",{className:"tab-pane fade",id:"uploadMyOwn"},r.a.createElement("h6",null,"Choose the smaller set of images that you want to make the mosaic from. Make sure that the selected image files are less than 2MB in size and the entire set is less than or equal to 30MB. The allowed extensions are jpeg and png. You can select a maximum of 50 images and a minimum of 30 images. NOTE: The quality of the generated mosaic will largely depend on smaller image set and the target image. You might have to try a few times before you can get it right :)"),r.a.createElement(b,{imageUrls:D,setFiles:o,files:s}),r.a.createElement("form",{onSubmit:M},r.a.createElement("fieldset",null,r.a.createElement("div",{className:"form-group"},r.a.createElement("label",{htmlFor:"InputFile"},"File input"),r.a.createElement("input",{type:"file",className:"form-control-file",id:"InputFile","aria-describedby":"fileHelp",onChange:function(e){var t=[].concat(Object(u.a)(s),Object(u.a)(Object(u.a)(e.target.files).filter((function(e){return"image"===e.type.split("/")[0]&&E.filter((function(t){return t===e.type.split("/")[1]})).length>0}))));o(t)},multiple:!0}),r.a.createElement(d,{error:F})),r.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit"))))},S=a(12);var N=function(e){var t=e.incrementStep,a=e.setDirname;return Object(S.useScrollPosition)((function(e){var t=e.prevPos,a=e.currPos;t.y<0&&0===a.x&&0===a.y&&window.scrollTo(t.x,Math.abs(t.y))})),r.a.createElement(r.a.Fragment,null,r.a.createElement("ul",{className:"nav nav-tabs list-inline"},r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link","data-toggle":"tab",href:"#uploadMyOwn"},"Upload My Own")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link active","data-toggle":"tab",href:"#grabFromInternet"},"Grab from the internet"))),r.a.createElement("div",{id:"myTabContent",className:"tab-content"},r.a.createElement(j,{incrementStep:t,setDirname:a}),r.a.createElement(w,{incrementStep:t,setDirname:a})))},x=a(13),k=a.n(x);var F=function(e){var t=e.setCurrentStep;return r.a.createElement("div",{className:"container text-center"},r.a.createElement("h5",{className:"mt-3"},"In the field of photographic imaging, a photographic mosaic, also known under the term Photomosaic, is a picture that has been divided into tiled sections, each of which is replaced with another photograph that matches the target photo. Here's an example"),r.a.createElement(f.LazyLoadImage,{effect:"blur",src:k.a,id:"landing-gif",className:"mt-5"}),r.a.createElement("button",{onClick:function(){return t(2)},type:"button",className:"btn btn-primary btn-lg btn-block mt-5"},"Make Mosaic with test Flower image set"),r.a.createElement("button",{onClick:function(){return t(1)},type:"button",className:"btn btn-primary btn-lg btn-block"},"Make Mosaic with your own custom image set"))},T=a(14);var C=function(e){var t=e.dirname,a=e.setDirname,n=e.setCurrentStep;return r.a.createElement(T.a,{date:Date.now()+9e5,intervalDelay:2,precision:2,renderer:function(e){var i=e.minutes,c=e.seconds,s=e.milliseconds;if(e.completed){var l=new FormData;return l.append("dirname",t),fetch("/api/delete",{method:"POST",body:l}).then((function(e){a("test"),n(1),sessionStorage.removeItem("dirname")})),r.a.createElement("h1",null,"Time Over!")}return r.a.createElement("div",{className:"row text-center timer-row"},r.a.createElement("div",{className:"col-md-12"},r.a.createElement("span",{className:"timer "},i.toString().padStart(2,"0"),":",c.toString().padStart(2,"0"),":",s.toString().substring(0,2))))}})};var M=function(e){var t=e.dirname,a=e.setDirname,i=e.setCurrentStep,c=Object(n.useState)(""),s=Object(l.a)(c,2),o=s[0],f=s[1],b=Object(n.useState)(null),h=Object(l.a)(b,2),g=h[0],w=h[1],y=Object(n.useState)(""),O=Object(l.a)(y,2),j=O[0],S=O[1],N=Object(n.useState)(0),x=Object(l.a)(N,2),k=x[0],F=x[1],T=Object(n.useState)(30),C=Object(l.a)(T,2),M=C[0],D=C[1],P=Object(n.useState)(!1),I=Object(l.a)(P,2),L=I[0],z=I[1],U=Object(n.useState)(""),q=Object(l.a)(U,2),A=q[0],G=q[1],B=function(e){return new Promise((function(t){var a=new Image;a.onload=function(){t({height:a.height,width:a.width})},a.src=e}))},R=function(){var e=Object(p.a)(m.a.mark((function e(){var t,a,n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t="",e.next=3,B(URL.createObjectURL(g));case 3:if(a=e.sent,n=a.height,r=a.width,g?"image"!==g.type.split("/")[0]||0===E.filter((function(e){return e===g.type.split("/")[1]})).length?t="Please select an image which is of format ".concat(E.join(", ")):g.size/1024/1024>3?t="Please select a file less than 3mb":(n<600||r<600)&&(t="Please select an image with size atleast 600x600 px"):t="Please choose a file to upload",""===t){e.next=11;break}return S(t),setTimeout((function(){return S("")}),3e3),e.abrupt("return",!1);case 11:return e.abrupt("return",!0);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y=function(){var e=Object(p.a)(m.a.mark((function e(){var n,r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,R();case 2:if(!e.sent){e.next=13;break}(n=new FormData).append("file",g),n.append("dirname",t),n.append("squareSize",M),(r=new XMLHttpRequest).open("POST","/api/tile"),r.upload.addEventListener("progress",(function(e){var t=e.loaded/e.total*100;F(t)})),r.addEventListener("load",(function(e){setTimeout((function(){F(0),z(!1);var e=JSON.parse(r.response);e.abort?(a("test"),i(1),sessionStorage.removeItem("dirname")):e.error?(S(r.response.error),setTimeout((function(){return S("")}),3e3)):G("data:".concat(g.type,";base64,").concat(e.img))}),500)})),z(!0),r.send(n);case 13:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"container"},r.a.createElement("h6",{className:"mt-3"},"You have 15 minutes to make a mosaic with whatever image you want. Make sure the image you select is atleast 600x600px big for better results. The allowed extensions are jpeg and png. NOTE: The quality of the generated mosaic will largely depend on smaller image set and the target image. You might have to try a few times before you can get it right :)"),L?r.a.createElement(v,null):r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"mt-3 form-inline"},r.a.createElement("label",{htmlFor:"exampleFormControlSelect1"},r.a.createElement("strong",null,"Square size")),r.a.createElement("select",{className:"form-control square-size-select m-2",id:"exampleFormControlSelect1",onChange:function(e){return D(e.target.value)},value:M},Object(u.a)(Array(11).keys()).map((function(e,t){return r.a.createElement("option",{key:t},20+e)})))),r.a.createElement("div",{className:"input-group mt-3"},r.a.createElement("div",{className:"custom-file"},r.a.createElement("input",{type:"file",className:"custom-file-input",id:"inputGroupFile04","aria-describedby":"inputGroupFileAddon04",onChange:function(e){if(e.target.files.length>0){var t=e.target.files[0];f(t.name),w(t)}}}),r.a.createElement("label",{className:"custom-file-label",htmlFor:"inputGroupFile04"},""===o?"Choose file":o)),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-secondary",type:"button",id:"inputGroupFileAddon04",onClick:Y},"upload")))),r.a.createElement(d,{error:j}),k>0&&r.a.createElement(r.a.Fragment,null,r.a.createElement("h5",{className:"mt-4 text-center"},"".concat(Math.round(k),"%")),r.a.createElement("progress",{className:"mt-1",style:{width:"100%"},max:"100",value:Math.round(k)})),""!==A&&r.a.createElement(r.a.Fragment,null,r.a.createElement("img",{className:"mt-3",src:A,width:"100%",alt:"generated mosaic"}),r.a.createElement("a",{download:"tileart.".concat(g.type.split("/")[1]),className:"btn btn-primary btn-lg btn-block mt-2",href:A},"Download")))};var D=function(){var e,t=Object(n.useState)(0),a=Object(l.a)(t,2),i=a[0],c=a[1],s=Object(n.useState)("test"),o=Object(l.a)(s,2),m=o[0],u=o[1],p=function(){var e=new FormData;e.append("dirname",sessionStorage.getItem("dirname")),navigator.sendBeacon("/api/delete",e),sessionStorage.removeItem("dirname")},d=function(e){return e.preventDefault(),e.returnValue="","Are you sure you want to leave?\nAll your progress will be lost"};switch(Object(n.useEffect)((function(){window.addEventListener("beforeunload",d),window.addEventListener("unload",p,!1)}),[]),i){case 0:e=r.a.createElement(F,{setCurrentStep:c});break;case 1:e=r.a.createElement(N,{incrementStep:function(){return c((function(e){return e+1}))},setDirname:u});break;case 2:e=r.a.createElement(r.a.Fragment,null,r.a.createElement(C,{dirname:m,setDirname:u,setCurrentStep:c}),r.a.createElement(M,{dirname:m,setDirname:u,setCurrentStep:c}));break;default:e=r.a.createElement("h1",null,"404 Page Not found..., Please reload")}return r.a.createElement("div",{className:"container"},e)};var P=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(s,null),r.a.createElement(D,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(P,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[15,1,2]]]);
//# sourceMappingURL=main.32a38c4e.chunk.js.map